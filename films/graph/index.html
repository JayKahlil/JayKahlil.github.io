<!DOCTYPE html>
<html>

<head>
    <meta charset="UTF-8" />
    <title>Letterboxd Film Graph</title>
    <script src="graph.js" type="module"></script>
    <script type="module">
        import { loadNav } from '/nav/nav.js';
        loadNav('/films/graph');
    </script>
    <style>
        body {
            margin: 0;
            overflow: hidden;
            font-family: Arial, sans-serif;
        }

        #graph-svg {
            background-color: rgb(45, 45, 45);
            cursor: grab;
            width: 100vw;
            height: 100vh;
            display: block;
        }

        #graph-svg:active {
            cursor: grabbing;
        }

        #diary-label {
            font-family: Arial, sans-serif;
            color: #616161;
            font-size: 12px;
            margin-top: 8px;
            text-align: left;
        }

        #letterboxd-profile-link,
        .info-container a {
            color: #616161;
            text-decoration: none;
        }

        #upload-button {
            padding: 10px;
            background: #ee8732;
            color: white;
            border: none;
            border-radius: 5px;
            cursor: pointer;
        }

        #graph-choices {
            margin-left: 10px;
            display: flex;
        }

        #graph-controls {
            position: absolute;
            top: 68px;
            left: 20px;
        }

        .graph-choice input[type=radio] {
            display: none;
        }

        .graph-choice label {
            display: block;
            padding: 10px;
            color: #fff;
            font-weight: bold;
            text-align: center;
            transition: all .4s 0s ease;
        }

        .graph-choice input[id="diary-choice"]:checked+label {
            background-color: #66dd66;
            color: #000;
            border-radius: 50px;
        }

        .graph-choice input[id="release-choice"]:checked+label {
            background-color: #65baef;
            color: #000;
            border-radius: 50px;
        }

        .info-container {
            position: relative;
            display: inline-block;
            margin-left: 10px;
            color: #9d9d9d;
        }

        .info-container span {
            font-size: 18px;
            user-select: none;
            cursor: pointer;
            position: absolute;
            top: 50%;
            transform: translateY(-50%);
        }

        .info-container div {
            display: none;
            position: absolute;
            top: 125%;
            left: 50%;
            transform: translateX(-50%);
            background-color: #333333c6;
            color: #fff;
            padding: 10px;
            border-radius: 10px;
            width: 400px;
            text-align: center;
            z-index: 1;
        }

        .info-container span:hover+div {
            display: block;
        }

        .info-container h1 {
            font-size: 16px;
            margin: 10px 0 5px 0;
            text-align: left;
            text-decoration: underline;
        }

        .info-container p,
        .info-container ul {
            font-size: 12px;
            margin: 5px 0;
            text-align: left;
            color: #c6c6c6
        }

        .star-container input {
            position: absolute;
            opacity: 0;
            cursor: pointer;
            height: 0;
            width: 0;
        }

        .star-container {
            display: flex;
            justify-content: center;
            position: relative;
            cursor: pointer;
            user-select: none;
            margin-left: 10px;
            text-align: center;
        }

        .star-container svg {
            left: auto;
            height: 38px;
            width: 38px;
            transition: all 0.3s;
            fill: #666;
            transform: scale(1.3);
        }

        .star-container svg:hover {
            transform: scale(1.4);
        }

        .star-container input:checked~svg {
            fill: url("#goldGradient");
        }

        .star-container filter {
            display: none;
        }

        .star-container input:checked~svg defs filter {
            display: inline;
        }
        #black-hole {
            filter: blur(1px);
            stroke-width: 1px;
            stroke-linecap: round;
        }
        .star-node {
            filter: blur(2px);
        }
    </style>
</head>

<body>
    <div id="graph-controls">
        <div style="display: flex;">
            <input type="file" id="csv-upload" accept=".csv" style="display: none;">
            <button id="upload-button">Upload Custom CSV</button>
            <div id="graph-choices">
                <div class="graph-choice">
                    <input type="radio" id="diary-choice" name="graph-type" value="diary" checked>
                    <label for="diary-choice">Diary Graph</label>
                </div>
                <div class="graph-choice">
                    <input type="radio" id="release-choice" name="graph-type" value="release">
                    <label for="release-choice">Release Year Graph</label>
                </div>
            </div>
            <div class="star-container">
                <label class="star-toggle">
                    <input type="checkbox" id="star-toggle-checkbox">
                    <svg xmlns="http://www.w3.org/2000/svg" viewBox="-6.54689574242 -6.99011301994 38 38">
                        <defs>
                            <filter id="star-glow">
                                <feGaussianBlur stdDeviation="1.5" result="coloredBlur" />
                                <feMerge>
                                    <feMergeNode in="coloredBlur" />
                                    <feMergeNode in="SourceGraphic" />
                                </feMerge>
                            </filter>

                            <linearGradient id="goldGradient" gradientTransform="rotate(30)">
                                <stop offset="0%" stop-color="#e3a812" />
                                <stop offset="50%" stop-color="#ffd86e" />
                                <stop offset="100%" stop-color="#d19e1d" />
                            </linearGradient>
                        </defs>
                        <path
                            d="M12.52 3.06287L15.1485 8.3943C15.1828 8.46858 15.2571 8.52001 15.3371 8.53144L21.2171 9.38858C21.6914 9.45715 21.88 10.04 21.5371 10.3772L17.4057 14.4C17.2685 14.5314 17.2057 14.7257 17.24 14.9143L18.2171 20.6C18.2971 21.0743 17.8 21.4343 17.3771 21.2114L12.1143 18.4457C12.04 18.4057 11.9543 18.4057 11.88 18.4457L6.61712 21.2114C6.19426 21.4343 5.69712 21.0743 5.77712 20.6L6.78855 14.7429C6.79998 14.6629 6.77712 14.5772 6.71426 14.52L2.46283 10.3714C2.11998 10.0343 2.30855 9.45144 2.78283 9.38287L8.66283 8.52572C8.74283 8.5143 8.81712 8.46287 8.85141 8.38858L11.48 3.05715C11.6914 2.6343 12.3085 2.6343 12.52 3.06287Z"
                            filter="url(#star-glow)" />
                    </svg>
                </label>
            </div>
            <div class="info-container">
                <span label="What is all this?">â“˜</span>
                <div>
                    <h1>Diary Graph</h1>
                    <p>This graph visualizes Letterboxd diary entries, connecting films based on the years in which they
                        were watched.</p>

                    <h1>Release Year Graph</h1>
                    <p>This graph visualizes Letterboxd 'watched' films based on their release years.

                    <h1>Viewing your own data</h1>
                    <p>Export your letterboxd data <a href="https://letterboxd.com/settings/data/">here</a> and then
                        upload the relevant file:</p>
                    <ul>
                        <li><strong>Diary Graph:</strong> Upload your <code>diary.csv</code> file.</li>
                        <li><strong>Release Year Graph:</strong> Upload your <code>watched.csv</code> file.</li>
                    </ul>
                </div>
            </div>
        </div>
        <div id="diary-label"><a id="letterboxd-profile-link" href="https://letterboxd.com/Kahlil/">Jay's Letterboxd
                History</a></div>
    </div>
    <svg id="graph-svg">
        <!-- <defs>
            <filter id="star-node-glow" y="-50%" height="200%" x="-50%" width="200%">
                <feGaussianBlur stdDeviation="300" result="coloredBlur" />
                <feMerge>
                    <feMergeNode in="coloredBlur" />
                    <feMergeNode in="SourceGraphic" />
                </feMerge>
            </filter>

            <radialGradient id="black-hold-gradient">
                <stop offset="0%" stop-color="#000000" stop-opacity="1" />
                <stop offset="50%" stop-color="#ffffff" stop-opacity="1" />
                <stop offset="100%" stop-color="#ffffff" stop-opacity="0" />
            </radialGradient>
        </defs> -->
    </svg>
</body>

</html>